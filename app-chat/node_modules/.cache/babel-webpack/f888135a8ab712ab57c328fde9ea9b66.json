{"ast":null,"code":"import _asyncToGenerator from \"E:/Important/FIT/project-front-end/FrontEnd_ThayLong_Nhom-21/app-chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { renderMethodNotFoundError, renderMissingResponseError, renderUnexpectedResultError } from './error-renderers';\nexport const createMessageHandler = (receiver, workerImplementation) => {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* ({\n      data: {\n        id,\n        method,\n        params\n      }\n    }) {\n      const messageHandler = workerImplementation[method];\n\n      try {\n        if (messageHandler === undefined) {\n          throw renderMethodNotFoundError({\n            method\n          });\n        }\n\n        const response = params === undefined ? messageHandler() : messageHandler(params);\n\n        if (response === undefined) {\n          throw renderMissingResponseError({\n            method\n          });\n        }\n\n        const synchronousResponse = response instanceof Promise ? yield response : response;\n\n        if (id === null) {\n          if (synchronousResponse.result !== undefined) {\n            throw renderUnexpectedResultError({\n              method\n            });\n          }\n        } else {\n          if (synchronousResponse.result === undefined) {\n            throw renderUnexpectedResultError({\n              method\n            });\n          }\n\n          const {\n            result,\n            transferables = []\n          } = synchronousResponse;\n          receiver.postMessage({\n            id,\n            result\n          }, transferables);\n        }\n      } catch (err) {\n        const {\n          message,\n          status = -32603\n        } = err;\n        receiver.postMessage({\n          error: {\n            code: status,\n            message\n          },\n          id\n        });\n      }\n    });\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n}; //# sourceMappingURL=create-message-handler.js.map","map":null,"metadata":{},"sourceType":"module"}