{"ast":null,"code":"import _asyncToGenerator from \"E:/Important/FIT/project-front-end/FrontEnd_ThayLong_Nhom-21/app-chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nexport class CallVideoService {\n  constructor() {\n    // Request mediaDevices\n    this.mediaConstraints = {\n      audio: true,\n      video: true\n    };\n  }\n\n  callVideo() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.localStream = yield navigator.mediaDevices.getUserMedia(_this.mediaConstraints);\n      _this.is_show = true;\n    })();\n  }\n\n  startVideo() {\n    this.is_close_camera = false;\n    this.localStream.getTracks().forEach(function (track) {\n      track.enabled = true;\n    });\n    document.getElementById(\"my_camera\").srcObject = this.localStream;\n  }\n\n  offVideo() {\n    this.is_close_camera = true;\n    this.localStream.getTracks().forEach(function (track) {\n      track.enabled = false;\n    });\n    document.getElementById(\"my_camera\").srcObject = undefined;\n  }\n\n  close() {\n    this.is_show = false;\n    this.localStream.getTracks().forEach(function (track) {\n      track.stop();\n    });\n  }\n\n}\n\nCallVideoService.ɵfac = function CallVideoService_Factory(t) {\n  return new (t || CallVideoService)();\n};\n\nCallVideoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CallVideoService,\n  factory: CallVideoService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["E:\\Important\\FIT\\project-front-end\\FrontEnd_ThayLong_Nhom-21\\app-chat\\src\\app\\service\\chat-page\\call-video\\call-video.service.ts"],"names":[],"mappings":";;AAKA,OAAM,MAAO,gBAAP,CAAuB;AAiB3B,EAAA,WAAA,GAAA;AAfA;AACO,SAAA,gBAAA,GAAmB;AACxB,MAAA,KAAK,EAAE,IADiB;AAExB,MAAA,KAAK,EAAC;AAFkB,KAAnB;AAcU;;AAEJ,EAAA,SAAS,GAAA;AAAA;;AAAA;AACpB,MAAA,KAAI,CAAC,WAAL,SAAyB,SAAS,CAAC,YAAV,CAAuB,YAAvB,CAAoC,KAAI,CAAC,gBAAzC,CAAzB;AACA,MAAA,KAAI,CAAC,OAAL,GAAe,IAAf;AAFoB;AAGrB;;AAEM,EAAA,UAAU,GAAA;AACf,SAAK,eAAL,GAAsB,KAAtB;AACA,SAAK,WAAL,CAAiB,SAAjB,GAA6B,OAA7B,CAAqC,UAAS,KAAT,EAAc;AACjD,MAAA,KAAK,CAAC,OAAN,GAAe,IAAf;AACD,KAFD;AAGC,IAAA,QAAQ,CAAC,cAAT,CAAwB,WAAxB,EAA0D,SAA1D,GAAsE,KAAK,WAA3E;AACF;;AAEM,EAAA,QAAQ,GAAA;AACb,SAAK,eAAL,GAAsB,IAAtB;AACA,SAAK,WAAL,CAAiB,SAAjB,GAA6B,OAA7B,CAAqC,UAAS,KAAT,EAAc;AACjD,MAAA,KAAK,CAAC,OAAN,GAAe,KAAf;AACD,KAFD;AAGC,IAAA,QAAQ,CAAC,cAAT,CAAwB,WAAxB,EAA0D,SAA1D,GAAsE,SAAtE;AACF;;AAEM,EAAA,KAAK,GAAA;AACV,SAAK,OAAL,GAAe,KAAf;AACA,SAAK,WAAL,CAAiB,SAAjB,GAA6B,OAA7B,CAAqC,UAAS,KAAT,EAAc;AACjD,MAAA,KAAK,CAAC,IAAN;AACD,KAFD;AAGD;;AA7C0B;;;mBAAhB,gB;AAAgB,C;;;SAAhB,gB;AAAgB,EAAA,OAAA,EAAhB,gBAAgB,CAAA,I;AAAA,EAAA,UAAA,EAFf","sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CallVideoService {\r\n\r\n  // Request mediaDevices\r\n  public mediaConstraints = {\r\n    audio: true,\r\n    video:true\r\n  }\r\n\r\n  // localStream\r\n  public localStream: MediaStream;\r\n\r\n  // is show component call video\r\n  public is_show: boolean;\r\n\r\n  // Trạng thái camera bật hay tắt\r\n  public is_close_camera:boolean;\r\n\r\n  constructor() { }\r\n\r\n  public async callVideo(){\r\n    this.localStream = await navigator.mediaDevices.getUserMedia(this.mediaConstraints);\r\n    this.is_show = true;\r\n  }\r\n\r\n  public startVideo(){\r\n    this.is_close_camera =false\r\n    this.localStream.getTracks().forEach(function(track) {\r\n      track.enabled =true;\r\n    });\r\n    (document.getElementById(\"my_camera\") as HTMLVideoElement).srcObject = this.localStream;\r\n  }\r\n\r\n  public offVideo(){\r\n    this.is_close_camera =true;\r\n    this.localStream.getTracks().forEach(function(track) {\r\n      track.enabled =false;\r\n    });\r\n    (document.getElementById(\"my_camera\") as HTMLVideoElement).srcObject = undefined;\r\n  }\r\n\r\n  public close(){\r\n    this.is_show = false;\r\n    this.localStream.getTracks().forEach(function(track) {\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}