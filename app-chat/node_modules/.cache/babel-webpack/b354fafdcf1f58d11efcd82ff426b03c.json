{"ast":null,"code":"import _asyncToGenerator from \"E:/Important/FIT/project-front-end/FrontEnd_ThayLong_Nhom-21/app-chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { generateUniqueNumber } from 'fast-unique-numbers';\nimport { renderUnknownPortIdError } from './error-renderers';\nimport { isSupportingTransferables } from './is-supporting-transferables';\nconst DESTROY_WORKER_FUNCTIONS = new Map();\nexport const extendWorkerImplementation = (createWorker, partialWorkerImplementation, isSupportedFunction) => ({ ...partialWorkerImplementation,\n  connect: ({\n    port\n  }) => {\n    port.start();\n    const destroyWorker = createWorker(port, partialWorkerImplementation);\n    const portId = generateUniqueNumber(DESTROY_WORKER_FUNCTIONS);\n    DESTROY_WORKER_FUNCTIONS.set(portId, () => {\n      destroyWorker();\n      port.close();\n      DESTROY_WORKER_FUNCTIONS.delete(portId);\n    });\n    return {\n      result: portId\n    };\n  },\n  disconnect: ({\n    portId\n  }) => {\n    const destroyWorker = DESTROY_WORKER_FUNCTIONS.get(portId);\n\n    if (destroyWorker === undefined) {\n      throw renderUnknownPortIdError({\n        portId: portId.toString()\n      });\n    }\n\n    destroyWorker();\n    return {\n      result: null\n    };\n  },\n  isSupported: function () {\n    var _ref = _asyncToGenerator(function* () {\n      const isSelfSupported = yield isSupportingTransferables();\n\n      if (isSelfSupported) {\n        const result = isSupportedFunction();\n        const synchronousResult = result instanceof Promise ? yield result : result;\n        return {\n          result: synchronousResult\n        };\n      }\n\n      return {\n        result: false\n      };\n    });\n\n    return function isSupported() {\n      return _ref.apply(this, arguments);\n    };\n  }()\n}); //# sourceMappingURL=extend-worker-implementation.js.map","map":null,"metadata":{},"sourceType":"module"}