{"ast":null,"code":"import _asyncToGenerator from \"E:/Important/FIT/project-front-end/FrontEnd_ThayLong_Nhom-21/app-chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { createBroker } from 'broker-factory';\nimport { addUniqueNumber } from 'fast-unique-numbers';\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\n\nexport * from './interfaces/index';\nexport * from './types/index';\nconst encoderIds = new Set();\nexport const wrap = createBroker({\n  encode: ({\n    call\n  }) => {\n    return /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (encoderId, timeslice) {\n        const arrayBuffers = yield call('encode', {\n          encoderId,\n          timeslice\n        });\n        encoderIds.delete(encoderId);\n        return arrayBuffers;\n      });\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  },\n  instantiate: ({\n    call\n  }) => {\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (mimeType, sampleRate) {\n        const encoderId = addUniqueNumber(encoderIds);\n        const port = yield call('instantiate', {\n          encoderId,\n          mimeType,\n          sampleRate\n        });\n        return {\n          encoderId,\n          port\n        };\n      });\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  },\n  register: ({\n    call\n  }) => {\n    return port => {\n      return call('register', {\n        port\n      }, [port]);\n    };\n  }\n});\nexport const load = url => {\n  const worker = new Worker(url);\n  return wrap(worker);\n}; //# sourceMappingURL=module.js.map","map":null,"metadata":{},"sourceType":"module"}